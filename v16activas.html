<!DOCTYPE html><html><head><title>Mapa de Balizas DGT V-16 Activas</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.4.0/ol.css"><style>body{margin:0;font-family:sans-serif;}#map{width:100vw;height:100vh;background:#f8f9fa;}#header{position:absolute;top:15px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.9);padding:12px 20px;border-radius:8px;z-index:1000;text-align:center;border:1px solid #bbb;}.ol-popup{position:absolute;background-color:white;padding:12px;border-radius:8px;border:1px solid #ccc;bottom:15px;left:-50px;min-width:280px;font-size:11px;pointer-events:none;box-shadow:0 2px 8px rgba(0,0,0,0.2);}#legend{position:absolute;bottom:30px;left:20px;z-index:1000;background:white;padding:10px;border:1px solid #bbb;font-size:11px;}.dot{height:8px;width:8px;border-radius:50%;display:inline-block;margin-right:8px;border:1.5px solid orange;}#footer-container{position:absolute;bottom:10px;right:10px;z-index:1000;display:flex;flex-direction:column;align-items:flex-end;}#search-box{width:240px;padding:8px;border:1px solid #bbb;border-radius:4px 4px 0 0;font-size:12px;outline:none;border-bottom:none;}#footer-links{background:white;padding:8px;font-size:11px;border:1px solid #bbb;width:240px;text-align:center;border-radius:0 0 4px 4px;}#footer-links a,#footer-links span{text-decoration:none;color:blue;margin-left:10px;cursor:pointer;}</style></head><body><div id="header"><div style="font-size:16px;font-weight:bold;">Balizas DGT V-16 Activas (Hora Local Madrid)</div><div style="font-size:12px;color:#333;margin-top:5px;">Balizas: <strong>70</strong> | Actualizado: <strong>20-enero-2026 07:02:35</strong></div></div><div id="map"></div><div id="legend"><strong>Minutos Activa (Oscuro = Reciente)</strong><br><div style="display:flex;align-items:center"><span class="dot" style="background:#67000d"></span> < 5 min</div><div style="display:flex;align-items:center"><span class="dot" style="background:#a50f15"></span> 5-15 min</div><div style="display:flex;align-items:center"><span class="dot" style="background:#de2d26"></span> 15-30 min</div><div style="display:flex;align-items:center"><span class="dot" style="background:#fb6a4a"></span> 30-60 min</div><div style="display:flex;align-items:center"><span class="dot" style="background:#fcae91"></span> 60-120 min</div><div style="display:flex;align-items:center"><span class="dot" style="background:#fee5d9"></span> > 120 min</div></div><div id="footer-container"><input type="text" id="search-box" placeholder="Buscar (Provincia) o Carretera/Municipio..."><div id="footer-links"><span onclick="downloadCSV()">Download CSV</span><span style="color: #bbb; margin: 0 8px;">|</span><a href="about.html" target="_blank">About</a></div></div><div id="popup" class="ol-popup"><div id="popup-content"></div></div><script src="https://cdn.jsdelivr.net/npm/ol@v7.4.0/dist/ol.js"></script><script>const data=[{"Case_id":19802962,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:00:09.000+01:00","mins":62.44,"Muni":"Móstoles","Prov":"Madrid","Road":"A-5","PK":"22.095","Dir1":"Creciente","Dir2":"Sudoeste","lat":40.3076,"lon":-3.904,"Tooltip":"<strong>Móstoles (Madrid) [62.44 mins]:<\/strong><br>A-5, PK: 22.095 (Creciente, Sudoeste)<br>(40.30764, -3.90399)"},{"Case_id":19802969,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:01:39.000+01:00","mins":60.94,"Muni":"Torrejón de la Calzada","Prov":"Madrid","Road":"A-42","PK":"24.801","Dir1":"Decreciente","Dir2":"Norte","lat":40.2133,"lon":-3.7898,"Tooltip":"<strong>Torrejón de la Calzada (Madrid) [60.94 mins]:<\/strong><br>A-42, PK: 24.801 (Decreciente, Norte)<br>(40.21326, -3.78978)"},{"Case_id":19802982,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:04:42.000+01:00","mins":57.89,"Muni":"Móstoles","Prov":"Madrid","Road":"A-5","PK":"22.326","Dir1":"Creciente","Dir2":"Sudoeste","lat":40.306,"lon":-3.9059,"Tooltip":"<strong>Móstoles (Madrid) [57.89 mins]:<\/strong><br>A-5, PK: 22.326 (Creciente, Sudoeste)<br>(40.30595, -3.90595)"},{"Case_id":19802996,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:06:48.000+01:00","mins":55.79,"Muni":"Dos Hermanas","Prov":"Sevilla","Road":"A-376","PK":"4.927","Dir1":"Decreciente","Dir2":"Oeste","lat":37.3322,"lon":-5.9124,"Tooltip":"<strong>Dos Hermanas (Sevilla) [55.79 mins]:<\/strong><br>A-376, PK: 4.927 (Decreciente, Oeste)<br>(37.33221, -5.91238)"},{"Case_id":19803014,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:09:51.000+01:00","mins":52.74,"Muni":"Móra la Nova","Prov":"Tarragona","Road":"C-44","PK":"26.515","Dir1":"Creciente","Dir2":"Oeste","lat":41.071,"lon":0.6645,"Tooltip":"<strong>Móra la Nova (Tarragona) [52.74 mins]:<\/strong><br>C-44, PK: 26.515 (Creciente, Oeste)<br>(41.07105, 0.66451)"},{"Case_id":19803015,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:09:56.000+01:00","mins":52.65,"Muni":"Móstoles","Prov":"Madrid","Road":"A-5","PK":"22.705","Dir1":"Creciente","Dir2":"Sudoeste","lat":40.3043,"lon":-3.9103,"Tooltip":"<strong>Móstoles (Madrid) [52.65 mins]:<\/strong><br>A-5, PK: 22.705 (Creciente, Sudoeste)<br>(40.30434, -3.91026)"},{"Case_id":19803038,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:14:29.000+01:00","mins":48.1,"Muni":"Aldea del Rey","Prov":"Ciudad Real","Road":"CM-4111","PK":"28.12","Dir1":"Decreciente","Dir2":"Noroeste","lat":38.7293,"lon":-3.8139,"Tooltip":"<strong>Aldea del Rey (Ciudad Real) [48.1 mins]:<\/strong><br>CM-4111, PK: 28.12 (Decreciente, Noroeste)<br>(38.72932, -3.81388)"},{"Case_id":19803053,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:17:57.000+01:00","mins":44.64,"Muni":"Vila-sacra","Prov":"Girona","Road":"GIV-6212","PK":"0","Dir1":"Decreciente","Dir2":"Nordeste","lat":42.2614,"lon":3.0154,"Tooltip":"<strong>Vila-sacra (Girona) [44.64 mins]:<\/strong><br>GIV-6212, PK: 0 (Decreciente, Nordeste)<br>(42.26144, 3.01543)"},{"Case_id":19803057,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:19:06.000+01:00","mins":43.49,"Muni":"Alcoi/Alcoy","Prov":"Alacant/Alicante","Road":"A-7","PK":"449.073","Dir1":"Creciente","Dir2":"Sudeste","lat":38.6831,"lon":-0.4617,"Tooltip":"<strong>Alcoi/Alcoy (Alacant/Alicante) [43.49 mins]:<\/strong><br>A-7, PK: 449.073 (Creciente, Sudeste)<br>(38.68307, -0.46166)"},{"Case_id":19803061,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:20:04.000+01:00","mins":42.52,"Muni":"Alcalá de Henares","Prov":"Madrid","Road":"R-2","PK":"25.901","Dir1":"Decreciente","Dir2":"Oeste","lat":40.524,"lon":-3.4012,"Tooltip":"<strong>Alcalá de Henares (Madrid) [42.52 mins]:<\/strong><br>R-2, PK: 25.901 (Decreciente, Oeste)<br>(40.52401, -3.40123)"},{"Case_id":19803069,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:21:10.000+01:00","mins":41.42,"Muni":"Vilafranca del Penedès","Prov":"Barcelona","Road":"AP-7","PK":"198.559","Dir1":"Creciente","Dir2":"Oeste","lat":41.328,"lon":1.679,"Tooltip":"<strong>Vilafranca del Penedès (Barcelona) [41.42 mins]:<\/strong><br>AP-7, PK: 198.559 (Creciente, Oeste)<br>(41.32799, 1.67896)"},{"Case_id":19803076,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:22:46.000+01:00","mins":39.82,"Muni":"Córdoba","Prov":"Córdoba","Road":"A-4","PK":"405.393","Dir1":"Creciente","Dir2":"Sur","lat":37.852,"lon":-4.7832,"Tooltip":"<strong>Córdoba (Córdoba) [39.82 mins]:<\/strong><br>A-4, PK: 405.393 (Creciente, Sur)<br>(37.85203, -4.7832)"},{"Case_id":19803086,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:24:36.000+01:00","mins":37.99,"Muni":"Vilobí d'Onyar","Prov":"Girona","Road":"C-25","PK":"234.299","Dir1":"Decreciente","Dir2":"Oeste","lat":41.8739,"lon":2.7594,"Tooltip":"<strong>Vilobí d'Onyar (Girona) [37.99 mins]:<\/strong><br>C-25, PK: 234.299 (Decreciente, Oeste)<br>(41.87394, 2.75937)"},{"Case_id":19803099,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:26:21.000+01:00","mins":36.24,"Muni":"A Cañiza","Prov":"Pontevedra","Road":"N-120","PK":"614.002","Dir1":"Creciente","Dir2":"Sudoeste","lat":42.2144,"lon":-8.2721,"Tooltip":"<strong>A Cañiza (Pontevedra) [36.24 mins]:<\/strong><br>N-120, PK: 614.002 (Creciente, Sudoeste)<br>(42.2144, -8.27206)"},{"Case_id":19803100,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:26:22.000+01:00","mins":36.22,"Muni":"Madrid","Prov":"Madrid","Road":"M-500","PK":"2.494","Dir1":"Creciente","Dir2":"Este","lat":40.4453,"lon":-3.7538,"Tooltip":"<strong>Madrid (Madrid) [36.22 mins]:<\/strong><br>M-500, PK: 2.494 (Creciente, Este)<br>(40.44527, -3.75383)"},{"Case_id":19803120,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:28:27.000+01:00","mins":34.14,"Muni":"Ontígola","Prov":"Toledo","Road":"N-400","PK":"37.08","Dir1":"Creciente","Dir2":"Este","lat":39.9939,"lon":-3.6077,"Tooltip":"<strong>Ontígola (Toledo) [34.14 mins]:<\/strong><br>N-400, PK: 37.08 (Creciente, Este)<br>(39.9939, -3.6077)"},{"Case_id":19803123,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:28:47.000+01:00","mins":33.8,"Muni":"Castelló de la Plana","Prov":"Castelló/Castellón","Road":"N-340a","PK":"975.927","Dir1":"Creciente","Dir2":"Norte","lat":39.9998,"lon":-0.0452,"Tooltip":"<strong>Castelló de la Plana (Castelló/Castellón) [33.8 mins]:<\/strong><br>N-340a, PK: 975.927 (Creciente, Norte)<br>(39.99976, -0.04515)"},{"Case_id":19803126,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:28:59.000+01:00","mins":33.6,"Muni":"L'Ametlla del Vallès","Prov":"Barcelona","Road":"C-17","PK":"24.562","Dir1":"Decreciente","Dir2":"Sur","lat":41.6439,"lon":2.2673,"Tooltip":"<strong>L'Ametlla del Vallès (Barcelona) [33.6 mins]:<\/strong><br>C-17, PK: 24.562 (Decreciente, Sur)<br>(41.64386, 2.26729)"},{"Case_id":19803138,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:30:19.000+01:00","mins":32.27,"Muni":"Aranjuez","Prov":"Madrid","Road":"CM-4004","PK":"44.759","Dir1":"Creciente","Dir2":"Sudeste","lat":39.9575,"lon":-3.7384,"Tooltip":"<strong>Aranjuez (Madrid) [32.27 mins]:<\/strong><br>CM-4004, PK: 44.759 (Creciente, Sudeste)<br>(39.95751, -3.73835)"},{"Case_id":19803150,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:32:09.000+01:00","mins":30.44,"Muni":"Colmenar Viejo","Prov":"Madrid","Road":"M-607","PK":"27.891","Dir1":"Decreciente","Dir2":"Sudeste","lat":40.6369,"lon":-3.7308,"Tooltip":"<strong>Colmenar Viejo (Madrid) [30.44 mins]:<\/strong><br>M-607, PK: 27.891 (Decreciente, Sudeste)<br>(40.63686, -3.73084)"},{"Case_id":19803154,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:32:29.000+01:00","mins":30.1,"Muni":"Sagunt/Sagunto","Prov":"València/Valencia","Road":"CV-314","PK":"1.228","Dir1":"Decreciente","Dir2":"Sudoeste","lat":39.679,"lon":-0.2893,"Tooltip":"<strong>Sagunt/Sagunto (València/Valencia) [30.1 mins]:<\/strong><br>CV-314, PK: 1.228 (Decreciente, Sudoeste)<br>(39.67904, -0.28926)"},{"Case_id":19803159,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:33:31.000+01:00","mins":29.07,"Muni":"O Porriño","Prov":"Pontevedra","Road":"A-52","PK":"301.989","Dir1":"Creciente","Dir2":"Oeste","lat":42.1717,"lon":-8.5842,"Tooltip":"<strong>O Porriño (Pontevedra) [29.07 mins]:<\/strong><br>A-52, PK: 301.989 (Creciente, Oeste)<br>(42.17174, -8.5842)"},{"Case_id":19803170,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:34:55.000+01:00","mins":27.67,"Muni":"Petrer","Prov":"Alacant/Alicante","Road":"A-31","PK":"200.332","Dir1":"Decreciente","Dir2":"Noroeste","lat":38.5015,"lon":-0.791,"Tooltip":"<strong>Petrer (Alacant/Alicante) [27.67 mins]:<\/strong><br>A-31, PK: 200.332 (Decreciente, Noroeste)<br>(38.50154, -0.79105)"},{"Case_id":19803198,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:38:13.000+01:00","mins":24.37,"Muni":"Casarrubios del Monte","Prov":"Toledo","Road":"CM-9424","PK":"0.036","Dir1":"Decreciente","Dir2":"Sudeste","lat":40.1669,"lon":-4.0613,"Tooltip":"<strong>Casarrubios del Monte (Toledo) [24.37 mins]:<\/strong><br>CM-9424, PK: 0.036 (Decreciente, Sudeste)<br>(40.16693, -4.0613)"},{"Case_id":19803199,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:38:19.000+01:00","mins":24.27,"Muni":"Madrid","Prov":"Madrid","Road":"A-6","PK":"4.982","Dir1":"Creciente","Dir2":"Noroeste","lat":40.4442,"lon":-3.732,"Tooltip":"<strong>Madrid (Madrid) [24.27 mins]:<\/strong><br>A-6, PK: 4.982 (Creciente, Noroeste)<br>(40.4442, -3.73203)"},{"Case_id":19803205,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:38:49.000+01:00","mins":23.77,"Muni":"Cartaya","Prov":"Huelva","Road":"N-431","PK":"112.686","Dir1":"Creciente","Dir2":"Sudoeste","lat":37.2863,"lon":-7.1701,"Tooltip":"<strong>Cartaya (Huelva) [23.77 mins]:<\/strong><br>N-431, PK: 112.686 (Creciente, Sudoeste)<br>(37.28627, -7.17012)"},{"Case_id":19803207,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:39:22.000+01:00","mins":23.22,"Muni":"Ciutadella de Menorca","Prov":"Illes Balears","Road":"Me-1","PK":"43.352","Dir1":"Creciente","Dir2":"Sudoeste","lat":40.0058,"lon":3.8577,"Tooltip":"<strong>Ciutadella de Menorca (Illes Balears) [23.22 mins]:<\/strong><br>Me-1, PK: 43.352 (Creciente, Sudoeste)<br>(40.00578, 3.85774)"},{"Case_id":19803208,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:39:32.000+01:00","mins":23.05,"Muni":"Madrid","Prov":"Madrid","Road":"M-40","PK":"6.496","Dir1":"Decreciente","Dir2":"Oeste","lat":40.4615,"lon":-3.622,"Tooltip":"<strong>Madrid (Madrid) [23.05 mins]:<\/strong><br>M-40, PK: 6.496 (Decreciente, Oeste)<br>(40.46153, -3.62204)"},{"Case_id":19803241,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:42:32.000+01:00","mins":20.05,"Muni":"Málaga","Prov":"Málaga","Road":"A-357","PK":"60.085","Dir1":"Decreciente","Dir2":"Oeste","lat":36.7179,"lon":-4.5599,"Tooltip":"<strong>Málaga (Málaga) [20.05 mins]:<\/strong><br>A-357, PK: 60.085 (Decreciente, Oeste)<br>(36.71788, -4.55992)"},{"Case_id":19803280,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:45:27.000+01:00","mins":17.14,"Muni":"Valdemoro","Prov":"Madrid","Road":"A-4","PK":"24.745","Dir1":"Decreciente","Dir2":"Oeste","lat":40.2068,"lon":-3.6797,"Tooltip":"<strong>Valdemoro (Madrid) [17.14 mins]:<\/strong><br>A-4, PK: 24.745 (Decreciente, Oeste)<br>(40.20682, -3.6797)"},{"Case_id":19803281,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:45:28.000+01:00","mins":17.12,"Muni":"Mieres","Prov":"Asturias","Road":"A-66","PK":"52.971","Dir1":"Creciente","Dir2":"Sur","lat":43.2068,"lon":-5.7877,"Tooltip":"<strong>Mieres (Asturias) [17.12 mins]:<\/strong><br>A-66, PK: 52.971 (Creciente, Sur)<br>(43.20682, -5.78768)"},{"Case_id":19803291,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:45:55.000+01:00","mins":16.67,"Muni":"Madrid","Prov":"Madrid","Road":"A-42","PK":"4.781","Dir1":"Creciente","Dir2":"Sur","lat":40.3778,"lon":-3.7194,"Tooltip":"<strong>Madrid (Madrid) [16.67 mins]:<\/strong><br>A-42, PK: 4.781 (Creciente, Sur)<br>(40.37781, -3.71936)"},{"Case_id":19803297,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:46:24.000+01:00","mins":16.19,"Muni":"Nàquera/Náquera","Prov":"València/Valencia","Road":"CV-305","PK":"0.921","Dir1":"Decreciente","Dir2":"Sudeste","lat":39.6044,"lon":-0.3853,"Tooltip":"<strong>Nàquera/Náquera (València/Valencia) [16.19 mins]:<\/strong><br>CV-305, PK: 0.921 (Decreciente, Sudeste)<br>(39.60437, -0.38531)"},{"Case_id":19803300,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:46:38.000+01:00","mins":15.95,"Muni":"Madrid","Prov":"Madrid","Road":"A-3","PK":"7.223","Dir1":"Decreciente","Dir2":"Oeste","lat":40.3921,"lon":-3.6254,"Tooltip":"<strong>Madrid (Madrid) [15.95 mins]:<\/strong><br>A-3, PK: 7.223 (Decreciente, Oeste)<br>(40.39207, -3.6254)"},{"Case_id":19803307,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:46:49.000+01:00","mins":15.77,"Muni":"Forallac","Prov":"Girona","Road":"C-66","PK":"8.337","Dir1":"Decreciente","Dir2":"Nordeste","lat":41.9578,"lon":3.0571,"Tooltip":"<strong>Forallac (Girona) [15.77 mins]:<\/strong><br>C-66, PK: 8.337 (Decreciente, Nordeste)<br>(41.95778, 3.05714)"},{"Case_id":19803309,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:47:04.000+01:00","mins":15.52,"Muni":"Molina de Segura","Prov":"Murcia","Road":"RM-A5","PK":"10.343","Dir1":"Creciente","Dir2":"Sudoeste","lat":38.0831,"lon":-1.195,"Tooltip":"<strong>Molina de Segura (Murcia) [15.52 mins]:<\/strong><br>RM-A5, PK: 10.343 (Creciente, Sudoeste)<br>(38.08312, -1.195)"},{"Case_id":19803336,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:49:07.000+01:00","mins":13.47,"Muni":"Alcalá de Guadaíra","Prov":"Sevilla","Road":"A-392","PK":"9.117","Dir1":"Creciente","Dir2":"Norte","lat":37.3363,"lon":-5.8404,"Tooltip":"<strong>Alcalá de Guadaíra (Sevilla) [13.47 mins]:<\/strong><br>A-392, PK: 9.117 (Creciente, Norte)<br>(37.33631, -5.84041)"},{"Case_id":19803348,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:49:57.000+01:00","mins":12.64,"Muni":"A Estrada","Prov":"Pontevedra","Road":"PO-841","PK":"17.764","Dir1":"Creciente","Dir2":"Sudeste","lat":42.7169,"lon":-8.5166,"Tooltip":"<strong>A Estrada (Pontevedra) [12.64 mins]:<\/strong><br>PO-841, PK: 17.764 (Creciente, Sudeste)<br>(42.71693, -8.51662)"},{"Case_id":19803349,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:50:00.000+01:00","mins":12.59,"Muni":"Madrid","Prov":"Madrid","Road":"A-42","PK":"4.781","Dir1":"Creciente","Dir2":"Sur","lat":40.3778,"lon":-3.7194,"Tooltip":"<strong>Madrid (Madrid) [12.59 mins]:<\/strong><br>A-42, PK: 4.781 (Creciente, Sur)<br>(40.37781, -3.71936)"},{"Case_id":19803350,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:50:05.000+01:00","mins":12.5,"Muni":"San Cristóbal de Entreviñas","Prov":"Zamora","Road":"A-66","PK":"203.396","Dir1":"Decreciente","Dir2":"Nordeste","lat":42.0724,"lon":-5.6599,"Tooltip":"<strong>San Cristóbal de Entreviñas (Zamora) [12.5 mins]:<\/strong><br>A-66, PK: 203.396 (Decreciente, Nordeste)<br>(42.07243, -5.65994)"},{"Case_id":19803351,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:50:10.000+01:00","mins":12.42,"Muni":"Granadilla de Abona","Prov":"Santa Cruz de Tenerife","Road":"TF-64","PK":"6.543","Dir1":"Creciente","Dir2":"Sur","lat":28.075,"lon":-16.5573,"Tooltip":"<strong>Granadilla de Abona (Santa Cruz de Tenerife) [12.42 mins]:<\/strong><br>TF-64, PK: 6.543 (Creciente, Sur)<br>(28.07497, -16.5573)"},{"Case_id":19803354,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:50:20.000+01:00","mins":12.25,"Muni":"Jaraíz de la Vera","Prov":"Cáceres","Road":"EX-203","PK":"35.489","Dir1":"Creciente","Dir2":"Nordeste","lat":40.078,"lon":-5.7435,"Tooltip":"<strong>Jaraíz de la Vera (Cáceres) [12.25 mins]:<\/strong><br>EX-203, PK: 35.489 (Creciente, Nordeste)<br>(40.07801, -5.7435)"},{"Case_id":19803377,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:52:14.000+01:00","mins":10.35,"Muni":"Cox","Prov":"Alacant/Alicante","Road":"N-340","PK":"694.349","Dir1":"Creciente","Dir2":"Nordeste","lat":38.1517,"lon":-0.915,"Tooltip":"<strong>Cox (Alacant/Alicante) [10.35 mins]:<\/strong><br>N-340, PK: 694.349 (Creciente, Nordeste)<br>(38.15174, -0.91504)"},{"Case_id":19803378,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:52:21.000+01:00","mins":10.24,"Muni":"Pinto","Prov":"Madrid","Road":"M-841","PK":"0.119","Dir1":"Creciente","Dir2":"Este","lat":40.2438,"lon":-3.6874,"Tooltip":"<strong>Pinto (Madrid) [10.24 mins]:<\/strong><br>M-841, PK: 0.119 (Creciente, Este)<br>(40.24379, -3.68738)"},{"Case_id":19803379,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:52:25.000+01:00","mins":10.17,"Muni":"Pozuelo de Alarcón","Prov":"Madrid","Road":"M-502","PK":"2.139","Dir1":"Creciente","Dir2":"Noroeste","lat":40.4093,"lon":-3.7859,"Tooltip":"<strong>Pozuelo de Alarcón (Madrid) [10.17 mins]:<\/strong><br>M-502, PK: 2.139 (Creciente, Noroeste)<br>(40.40931, -3.78591)"},{"Case_id":19803380,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:52:26.000+01:00","mins":10.15,"Muni":"Montcada i Reixac","Prov":"Barcelona","Road":"BV-5001","PK":"7.489","Dir1":"Creciente","Dir2":"Noroeste","lat":41.4842,"lon":2.193,"Tooltip":"<strong>Montcada i Reixac (Barcelona) [10.15 mins]:<\/strong><br>BV-5001, PK: 7.489 (Creciente, Noroeste)<br>(41.4842, 2.19304)"},{"Case_id":19803387,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:52:55.000+01:00","mins":9.67,"Muni":"Mequinenza","Prov":"Zaragoza","Road":"N-211","PK":"307.671","Dir1":"Creciente","Dir2":"Nordeste","lat":41.3547,"lon":0.2645,"Tooltip":"<strong>Mequinenza (Zaragoza) [9.67 mins]:<\/strong><br>N-211, PK: 307.671 (Creciente, Nordeste)<br>(41.35473, 0.26454)"},{"Case_id":19803392,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:53:41.000+01:00","mins":8.9,"Muni":"Sant Llorenç des Cardassar","Prov":"Illes Balears","Road":"Ma-4023","PK":"5.537","Dir1":"Decreciente","Dir2":"Oeste","lat":39.5837,"lon":3.3645,"Tooltip":"<strong>Sant Llorenç des Cardassar (Illes Balears) [8.9 mins]:<\/strong><br>Ma-4023, PK: 5.537 (Decreciente, Oeste)<br>(39.5837, 3.36451)"},{"Case_id":19803393,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:53:45.000+01:00","mins":8.84,"Muni":"Villafranca de Ebro","Prov":"Zaragoza","Road":"AP-2","PK":"28.56","Dir1":"Creciente","Dir2":"Este","lat":41.556,"lon":-0.6076,"Tooltip":"<strong>Villafranca de Ebro (Zaragoza) [8.84 mins]:<\/strong><br>AP-2, PK: 28.56 (Creciente, Este)<br>(41.55596, -0.60757)"},{"Case_id":19803411,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:55:32.000+01:00","mins":7.05,"Muni":"El Viso del Alcor","Prov":"Sevilla","Road":"A-398R1","PK":"0.011","Dir1":"Creciente","Dir2":"Sur","lat":37.3922,"lon":-5.7426,"Tooltip":"<strong>El Viso del Alcor (Sevilla) [7.05 mins]:<\/strong><br>A-398R1, PK: 0.011 (Creciente, Sur)<br>(37.39216, -5.74264)"},{"Case_id":19803418,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:56:12.000+01:00","mins":6.39,"Muni":"Ciudad Real","Prov":"Ciudad Real","Road":"N-430","PK":"306.669","Dir1":"Decreciente","Dir2":"Sur","lat":38.9841,"lon":-3.935,"Tooltip":"<strong>Ciudad Real (Ciudad Real) [6.39 mins]:<\/strong><br>N-430, PK: 306.669 (Decreciente, Sur)<br>(38.98406, -3.93495)"},{"Case_id":19803421,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:56:29.000+01:00","mins":6.1,"Muni":"Mazarrón","Prov":"Murcia","Road":"RM-332","PK":"34.951","Dir1":"Decreciente","Dir2":"Este","lat":37.5906,"lon":-1.3145,"Tooltip":"<strong>Mazarrón (Murcia) [6.1 mins]:<\/strong><br>RM-332, PK: 34.951 (Decreciente, Este)<br>(37.5906, -1.31446)"},{"Case_id":19803422,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:56:38.000+01:00","mins":5.95,"Muni":"Zaragoza","Prov":"Zaragoza","Road":"A-68","PK":"250.133","Dir1":"Creciente","Dir2":"Oeste","lat":41.6969,"lon":-0.9987,"Tooltip":"<strong>Zaragoza (Zaragoza) [5.95 mins]:<\/strong><br>A-68, PK: 250.133 (Creciente, Oeste)<br>(41.69692, -0.99866)"},{"Case_id":19803424,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:56:44.000+01:00","mins":5.85,"Muni":"Seseña","Prov":"Toledo","Road":"M-305","PK":"3.185","Dir1":"Decreciente","Dir2":"Oeste","lat":40.0878,"lon":-3.6109,"Tooltip":"<strong>Seseña (Toledo) [5.85 mins]:<\/strong><br>M-305, PK: 3.185 (Decreciente, Oeste)<br>(40.08778, -3.61088)"},{"Case_id":19803433,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:57:23.000+01:00","mins":5.2,"Muni":"Valdemoro","Prov":"Madrid","Road":"A-4","PK":"25.412","Dir1":"Decreciente","Dir2":"Noroeste","lat":40.201,"lon":-3.6776,"Tooltip":"<strong>Valdemoro (Madrid) [5.2 mins]:<\/strong><br>A-4, PK: 25.412 (Decreciente, Noroeste)<br>(40.20102, -3.67761)"},{"Case_id":19803435,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:57:40.000+01:00","mins":4.92,"Muni":"Espirdo","Prov":"Segovia","Road":"SG-V-2221","PK":"4.505","Dir1":"Creciente","Dir2":"Noroeste","lat":41.0092,"lon":-4.0743,"Tooltip":"<strong>Espirdo (Segovia) [4.92 mins]:<\/strong><br>SG-V-2221, PK: 4.505 (Creciente, Noroeste)<br>(41.00917, -4.0743)"},{"Case_id":19803446,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:57:52.000+01:00","mins":4.72,"Muni":"Vilablareix","Prov":"Girona","Road":"AP-7","PK":"63.75","Dir1":"Decreciente","Dir2":"Noroeste","lat":41.9633,"lon":2.7811,"Tooltip":"<strong>Vilablareix (Girona) [4.72 mins]:<\/strong><br>AP-7, PK: 63.75 (Decreciente, Noroeste)<br>(41.96333, 2.78113)"},{"Case_id":19803450,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:58:10.000+01:00","mins":4.42,"Muni":"Palencia","Prov":"Palencia","Road":"A-67","PK":"6.572","Dir1":"Creciente","Dir2":"Norte","lat":41.9873,"lon":-4.5022,"Tooltip":"<strong>Palencia (Palencia) [4.42 mins]:<\/strong><br>A-67, PK: 6.572 (Creciente, Norte)<br>(41.98725, -4.50218)"},{"Case_id":19803452,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:58:25.000+01:00","mins":4.17,"Muni":"Muñogalindo","Prov":"Ávila","Road":"N-110","PK":"274.372","Dir1":"Creciente","Dir2":"Oeste","lat":40.6003,"lon":-4.9045,"Tooltip":"<strong>Muñogalindo (Ávila) [4.17 mins]:<\/strong><br>N-110, PK: 274.372 (Creciente, Oeste)<br>(40.60032, -4.90453)"},{"Case_id":19803453,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:58:27.000+01:00","mins":4.14,"Muni":"Zaragoza","Prov":"Zaragoza","Road":"Z-40","PK":"18.048","Dir1":"Decreciente","Dir2":"Norte","lat":41.6381,"lon":-0.8316,"Tooltip":"<strong>Zaragoza (Zaragoza) [4.14 mins]:<\/strong><br>Z-40, PK: 18.048 (Decreciente, Norte)<br>(41.63806, -0.83163)"},{"Case_id":19803455,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:58:39.000+01:00","mins":3.94,"Muni":"València","Prov":"València/Valencia","Road":"CV-30","PK":"4.716","Dir1":"Creciente","Dir2":"Este","lat":39.5029,"lon":-0.3931,"Tooltip":"<strong>València (València/Valencia) [3.94 mins]:<\/strong><br>CV-30, PK: 4.716 (Creciente, Este)<br>(39.5029, -0.39314)"},{"Case_id":19803456,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:58:46.000+01:00","mins":3.82,"Muni":"Aldea del Fresno","Prov":"Madrid","Road":"M-507","PK":"18.361","Dir1":"Creciente","Dir2":"Oeste","lat":40.3165,"lon":-4.2068,"Tooltip":"<strong>Aldea del Fresno (Madrid) [3.82 mins]:<\/strong><br>M-507, PK: 18.361 (Creciente, Oeste)<br>(40.31654, -4.20676)"},{"Case_id":19803466,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:58:59.000+01:00","mins":3.6,"Muni":"Ibi","Prov":"Alacant/Alicante","Road":"A-7","PK":"457.525","Dir1":"Creciente","Dir2":"Sudoeste","lat":38.6332,"lon":-0.5193,"Tooltip":"<strong>Ibi (Alacant/Alicante) [3.6 mins]:<\/strong><br>A-7, PK: 457.525 (Creciente, Sudoeste)<br>(38.63316, -0.5193)"},{"Case_id":19803473,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T06:59:45.000+01:00","mins":2.84,"Muni":"Illescas","Prov":"Toledo","Road":"CM-41","PK":"24.149","Dir1":"Decreciente","Dir2":"Noroeste","lat":40.1082,"lon":-3.8925,"Tooltip":"<strong>Illescas (Toledo) [2.84 mins]:<\/strong><br>CM-41, PK: 24.149 (Decreciente, Noroeste)<br>(40.10822, -3.89253)"},{"Case_id":19803481,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T07:00:37.000+01:00","mins":1.97,"Muni":"Parla","Prov":"Madrid","Road":"A-42","PK":"22.213","Dir1":"Decreciente","Dir2":"Norte","lat":40.2358,"lon":-3.7818,"Tooltip":"<strong>Parla (Madrid) [1.97 mins]:<\/strong><br>A-42, PK: 22.213 (Decreciente, Norte)<br>(40.23581, -3.78183)"},{"Case_id":19803482,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T07:00:41.000+01:00","mins":1.9,"Muni":"Sant Cugat del Vallès","Prov":"Barcelona","Road":"AP-7","PK":"159.399","Dir1":"Creciente","Dir2":"Oeste","lat":41.4619,"lon":2.0207,"Tooltip":"<strong>Sant Cugat del Vallès (Barcelona) [1.9 mins]:<\/strong><br>AP-7, PK: 159.399 (Creciente, Oeste)<br>(41.4619, 2.02071)"},{"Case_id":19803493,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T07:00:50.000+01:00","mins":1.75,"Muni":"Jerez de los Caballeros","Prov":"Badajoz","Road":"EX-112","PK":"15.819","Dir1":"Decreciente","Dir2":"Nordeste","lat":38.3557,"lon":-6.655,"Tooltip":"<strong>Jerez de los Caballeros (Badajoz) [1.75 mins]:<\/strong><br>EX-112, PK: 15.819 (Decreciente, Nordeste)<br>(38.35572, -6.65496)"},{"Case_id":19803498,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T07:01:35.000+01:00","mins":1,"Muni":"Suances","Prov":"Cantabria","Road":"CA-341","PK":"1.373","Dir1":"Decreciente","Dir2":"Sudeste","lat":43.402,"lon":-4.0585,"Tooltip":"<strong>Suances (Cantabria) [1 mins]:<\/strong><br>CA-341, PK: 1.373 (Decreciente, Sudeste)<br>(43.40199, -4.05851)"},{"Case_id":19803499,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T07:01:44.000+01:00","mins":0.85,"Muni":"Jerez de la Frontera","Prov":"Cádiz","Road":"AP-4","PK":"80.198","Dir1":"Decreciente","Dir2":"Norte","lat":36.6929,"lon":-6.0781,"Tooltip":"<strong>Jerez de la Frontera (Cádiz) [0.85 mins]:<\/strong><br>AP-4, PK: 80.198 (Decreciente, Norte)<br>(36.69293, -6.07806)"},{"Case_id":19803509,"Type":"sit:GenericSituationRecord","Source":"DGT3.0","Publication_XML":"2026-01-20T07:02:35.288+01:00","Start_Time":"2026-01-20T07:02:28.000+01:00","mins":0.12,"Muni":"Elx/Elche","Prov":"Alacant/Alicante","Road":"N-340","PK":"720.183","Dir1":"Creciente","Dir2":"Este","lat":38.251,"lon":-0.6982,"Tooltip":"<strong>Elx/Elche (Alacant/Alicante) [0.12 mins]:<\/strong><br>N-340, PK: 720.183 (Creciente, Este)<br>(38.25105, -0.69823)"}];const fileTimestamp="20260120070235";function getR(m){if(m<=5)return"#67000d";if(m<=15)return"#a50f15";if(m<=30)return"#de2d26";if(m<=60)return"#fb6a4a";if(m<=120)return"#fcae91";return"#fee5d9";}const features=data.map(d=>new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([d.lon,d.lat])),tooltip:d.Tooltip,mins:d.mins,muni:(d.Muni||"").toLowerCase().trim(),road:(d.Road||"").toLowerCase().trim(),prov:(d.Prov||"").toLowerCase().trim()}));
           const source=new ol.source.Vector({features:features});
           const map=new ol.Map({
             target:"map",
             layers:[
               new ol.layer.Tile({source:new ol.source.OSM()}),
               new ol.layer.Vector({
                 source:source,
                 style:function(f){
                   const z=map.getView().getZoom();
                   return new ol.style.Style({
                     image:new ol.style.Circle({
                       radius:Math.max(5,z*0.8),
                       fill:new ol.style.Fill({color:getR(f.get("mins"))}),
                       stroke:new ol.style.Stroke({color:"orange",width:z>10?2:1})
                     })
                   });
                 }
               })
             ],
             view:new ol.View({center:ol.proj.fromLonLat([-3.70,40.41]),zoom:6})
           });document.getElementById("search-box").addEventListener("input",(e)=>{let t=e.target.value.toLowerCase().trim();let fil=t===""?features:t.startsWith("(")?features.filter(f=>f.get("prov").startsWith(t.substring(1))):features.filter(f=>f.get("muni").startsWith(t)||f.get("road").startsWith(t));source.clear();source.addFeatures(fil);});const overlay=new ol.Overlay({element:document.getElementById("popup"),autoPan:false});map.addOverlay(overlay);map.on("pointermove",e=>{const f=map.forEachFeatureAtPixel(e.pixel,feat=>feat);if(f){document.getElementById("popup-content").innerHTML=f.get("tooltip");overlay.setPosition(e.coordinate);map.getTargetElement().style.cursor="pointer";}else{overlay.setPosition(undefined);map.getTargetElement().style.cursor="";}});map.on("click",e=>{const f=map.forEachFeatureAtPixel(e.pixel,feat=>feat);if(f){map.getView().animate({center:f.getGeometry().getCoordinates(),zoom:14,duration:1000});}});function downloadCSV(){if(data.length===0)return;const h=["Municipio","Provincia","Carretera","PK","Sentido1","Sentido2","Lat","Lon"];const k=["Muni","Prov","Road","PK","Dir1","Dir2","lat","lon"];let csv="data:text/csv;charset=utf-8,"+h.join(",")+"\n";data.forEach(d=>{let r=k.map(x=>'"' + String(d[x]||"").replace(/"/g,'""') + '"');csv+=r.join(",")+"\n";});const l=document.createElement("a");l.setAttribute("href",encodeURI(csv));l.setAttribute("download",`dgt_balizas_activas_${fileTimestamp}.csv`);l.click();}</script></body></html>
